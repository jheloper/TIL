# JSP 개요

## CGI vs. WAS

CGI(Common Gateway Interface)는 웹 환경에서 동적인 프로그램의 실행 결과를 제공하는 웹 서비스에 대한 요구에 부응하기 위해 개발된 기술. 웹 환경에서 고급 언어로 작성된 응용 프로그램을 실행시키고 그 결과를 클라이언트에 전송하기 위한 표준기술.

WAS는 웹 서비스에서 최근 도입된 기술. 이전에는 웹 서비스를 제공하기 위해 웹 애플리케이션 방식이 아닌 CGI 방식을 사용했음.

CGI 방식은 클라이언트로부터 프로그램 실행 요청이 들어오면 웹 서버가 해당 프로그램을 직접 실행시키고 그 결과를 클라이언트로 전송함. 요청이 여러 개 들어오면 처리하기 위한 웹 서버 프로세스가 요청의 수만큼 실행됨. 요청이 많아질수록 메모리 사용량이 증가하고 시스템 과부하가 쉽게 걸리게 됨.

CGI 방식의 문제점을 극복하기 위해 고안된 기술이 WAS. WAS는 웹 서버가 담당하던 웹 서비스들 중에서 동적인 웹 서비스만을 전담하여 제공하기 위해 별도로 구축되는 서버로 동적 웹 서비스 제공에 최적화되어 구축됨.

WAS는 동적 웹 서비스 제공에 특화된 서버이며 프로세스 방식이 아닌 스레드 방식을 사용하기 때문에 CGI 방식에 비해 메모리 소모를 상당히 많이 줄일 수 있음.

## 웹 서버와 웹 애플리케이션 서버

웹 서버의 역할은 클라이언트로부터 요청을 받는 일과 처리된 서비스의 결과를 클라이언트로 전송하는 일로 나눠짐. 구체적으로 다음과 같은 기능들을 처리함.

1. 클라이언트가 요청한 웹 문서를 찾아서 전달하는 기능.
2. 요청 파일이 없거나 문제가 발생하면 정해진 코드 값으로 응답.
3. 클라이언트로부터의 요청에 대한 기본 사용자 인증을 처리함.
4. 프로그램에 대한 요청을 인식하면 수행시키고 그 결과를 클라이언트에 전송.

여러 웹 클라이언트의 요구를 웹 서버 한 개로 처리하면 서버의 부하가 가중되고 속도 및 보안 등 성능에 문제가 생기기 때문에 웹 서버의 기능을 구조적으로 분리하여 처리하려는 목적으로 제시된 것이 웹 애플리케이션 서버.

## 자바와 웹 프로그래밍

### 서블릿

자바 언어를 이용하여 웹 프로그램을 개발하기 위해 만든 표준 규약을 서블릿 규약이라고 하며, 이 규약에 따라 클래스를 서블릿이라고 함. 서블릿은 자바 언어로 구현되는 클래스이기 때문에 자바 언어로 코드를 작성하고 바이트 코드로 컴파일하여 사용됨.

서블릿을 이용해 웹 프로그래밍을 할 경우 원하는 로직을 서블릿으로 구현, 컴파일된 실행 코드를 서버에 탑재하여 웹 서비스를 제공함. 따라서 프로그램 내용이 수정될 경우 서블릿 클래스를 수정하여 다시 컴파일하고 그 결과를 다시 서버에 탑재해야 하기 때문에 개발 작업의 효율성이 낮은 문제점 발생.

서블릿의 단점을 보완하기 위해 스크립트 방식의 자바 기반 웹 프로그래밍 표준으로 JSP가 제안됨. JSP로 작성된 소스코드를 서버에 탑재하면 웹 애플리케이션 서버나 웹 컨테이너가 자동으로 컴파일하여 웹 서비스를 제공하는 방식을 채택함.

JSP 표준으로 개발된 프로그램은 웹 애플리케이션 서버에 의해 서블릿 클래스로 변환되고 컴파일되어 서비스를 제공함. 따라서 JSP 표준이 웹 서비스의 주요 기술이 됐다고 해서 서블릿 기술이 없어지거나 사용되지 않는 것은 아님.

### JSP

JSP는 스크립트 언어. 스크립트 언어란 웹 문서 표준인 HTML에 삽입되어 프로그램 실행 내역을 기술할 수 있는 언어라는 뜻. 스크립트 언어의 특성 이전에 자바에 기반을 두고 있는 언어이기 때문에 자바 언어의 특성을 활용하여 웹 프로그래밍에 적용할 수 있음.

JSP 특징 요약

1. 웹 문서에 삽입되는 스크립트 방식으로 프로그램 작성.
2. 자바 언어에 기반을 두고 있기 떄문에 자바 언어의 특성을 활용할 수 있음, 예를 들어 JDK가 제공하는 각종 클래스나 외부 API를 활용할 수 있음.
3. 자바 언어 특성 이외에 표현 언어, 표현식, 액션 태그 등 스크립트적인 요소를 제공하기 떄문에 더 효과적으로 웹 프로그램 작성 가능.
4. 다양한 개발환경이 오픈소스 형태로 제공되고 있음.

### JSP 선택 이유

JSP를 이용하면 자바 언어가 지니고 있는 '플랫폼 독립성'과 '다양한 기술 표준'을 웹 상에서 구현할 수 있음.

JSP는 오픈소스 형태로 운영되기 떄문에 전 세계 수많은 개발자들이 웹 서비스 개발에 필요한 기술을 개발하고 논의하여 기술 표준으로 정립하는 작업들이 활발하게 이뤄지고 있음.

### 웹 컨테이너

서블릿, JSP와 같은 웹 응용 프로그램들은 동적 컨텐츠를 생성하는 웹 컴포넌트로 인식되며, 이런 웹 컴포넌트를 저장하는 저장장소 역할, 메모리 로딩, 객체 생성 및 초기화 등 서블릿의 생명주기를 관리하고 JSP를 서블릿으로 변환하는 기능을 수행하는 프로그램이 바로 웹 컨테이너.

### 서블릿 컨테이너

서블릿 수행 환경을 위한 구성 요소

- 자바 런타임 환경
- 웹 서버
- 서블릿 컨테이너

대부분의 서블릿 컨테이너들은 웹 서버의 역할도 수행하기 떄문에 웹 서버가 없어도 서블릿 실행에는 문제 없음. 하지만 효율적인 웹 애플리케이션 실행 환경을 위해서는 웹 서버와 서블릿 컨테이너를 연동하도록 구축하는 것이 좋음.

서블릿 컨테이너는 클라이언트에서 전송되는 서블릿 요청에 대해 서블릿을 실행시키는 프로그램. 서블릿 실행에 대한 내부적 절차 및 과정은 컨테이너 종류마다 다르지만 대부분 표준 스펙에 맞춰 만들어지기 때문에 호환될 수 있음.

### JSP 컨테이너

JSP 컨테이너는 JSP 프로그램을 서블릿 프로그램으로 변환하는 기능을 하는 프로그램, 서블릿으로 구현되어 있음. 현재 사용되고 있는 대부분의 서블릿 컨테이너나 WAS는 JSP 컨테이너를 포함하고 있음.



## HTTP 프로토콜의 이해

HTTP는 전송 계층 프로토콜. TCP를 사용하는 애플리케이션 계층 프로토콜로 웹 클라이언트와 웹 서버가 통신할 때 필요한 스펙을 정의함.

HTTP는 기본적으로 하나의 요청과 그에 대한 하나의 응답으로 구성됨.

### HTTP 요청

시작 라인은 요청 방식과 URI, HTTP 버전 번호로 구성됨. 메시지 헤더 정보는 여러 개의 name:value 구조로 구성되며 정해진 헤더 정보가 포함됨. 메시지 몸체에는 서버에 보내는 추가 데이터가 포함될 수 있는데 POST 요청 방식인 경우에만 의미 있음.

### HTTP 응답

시작라인은 HTTP 버전 번호, 요청 상태 표시번호(서버의 응답 코드), 상태에 대한 짧은 설명문. 그 다음은 응답에 대한 메시지 헤더(name:value 형식), 그 다음은 빈 행이 오고 내용(데이터)가 옴.
