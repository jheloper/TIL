# JSP 기본 요소

## JSP 기술

JSP 기술은 웹 브라우저를 통한 요청에 대해 동적인 응답을 생성해 내는 텍스트 기반의 명세 수단을 제공함. 이 기술은 다음과 같은 요소를 포함하고 있음.

### 템플릿 데이터

템플릿 데이터는 전형적으로 텍스트 혹은 XML, HTML 태그로 구성된 컨텐츠를 의미함.

### 동적인 데이터의 추가

JSP 기술은 템플릿 데이터에 추가적으로 동적인 데이터를 끼워 넣을 수 있는 간단하지만 강력한 방법을 제공함. 태그 '<% %>'는 동적 데이터를 구성하기 위한 자바 코드를 넣을 수 있는 부분을 의미하며 스크립틀릿(scriptlet)이라고 함.



## JSP 문서의 기본 구조

`<%@ page ... %>`는 page 지시어라고 하며, JSP 페이지에 대한 정보를 설정할 때 사용함.

JSP 페이지 구성 요소

- 스크립트 요소
- 지시어
- 내장 객체
- 액션 태그
- 표현 언어
- 사용자 정의 태그와 JSTL

### 스크립트 요소

JSP 페이지에서 동적 데이터를 생성할 때 사용되는 중요한 요소.

- 스크립틀릿 : JSP 페이지에 삽입되는 자바 프로그램 코드. '<% ... %>' 태그 사용.
- 표현식 : 변수, 수식 값의 출력을 JSP 페이지에 삽입할 때 사용. '<%= ... %>' 태그 사용.
- 선언 : JSP 페이지에 삽입되는 자바 메서드 선언문. '<%! ... %>' 태그 사용.

### 지시어

지시어는 일종의 메시지라고 할 수 있는데 JSP 페이지에 대한 설정 정보를 지정할 때 사용함. '<%@ ... %>' 태그 사용.

```jsp
<%@ 지시어이름 속성1="값1" 속성2="값2"... %>
<%@ page contentType="text/html"; charset=euc-kr" %>
<%@ page import="java.util.Date" %>
```

| 지시어     | 설명                                       |
| ------- | ---------------------------------------- |
| include | JSP 페이지의 특정 영역에 다른 문서를 포함시킴.             |
| page    | JSP 페이지에 대한 정보 지정. JSP가 생성하는 문서의 타입, 출력 버퍼 크기, 에러 페이지 등 JSP 페이지에서 필요한 정보를 입력함. |
| taglib  | JSP 페이지에서 사용할 태그 라이브러리 지정함.              |

### 내장 객체

JSP에는 많이 사용되는 기능을 구현해 놓고 프로그래머들이 사용할 수 있도록 객체 형태로 제공되는 것이 있는데 이것을 '내장 객체'라고 함. JSP가 제공하는 내장 객체에는 'request, response, session, application, page' 등이 있음.

### 액션 태그

액션 태그는 XML의 태그와 같은 모양을 취하며, JSP 페이지에서 특별한 기능을 제공함. 액션 태그는 `<jsp:태그이름>`의 형태를 띠며 태그의 종류에 따라서 서로 다른 속성과 값을 갖게 됨.

### 표현 언어

JSP는 스크립트 요소를 통해 자바 언어의 대부분을 그대로 가져와 프로그래밍에 활용할 수 있는 장점이 있음. 허나 JSP 스크립트 요소들은 자바 언어에 기반을 둔 일종의 프로그램 코드 조각이기 때문에 다른 태그 요소들과 함께 사용하는 데에 제한이 있음.

표현 언어는 내장 객체와 함께 사용할 수 있는 태그 기반의 새로운 언어로서 스크립트 요소 사용 없이 프로그램적인 요소를 JSP 페이지에 추가할 수 있게 해 줌.

`${3 + 4}`와 같은 형태로 사용함.

### 사용자 정의 태그와 JSTL

사용자 정의 태그(Custom Tag)는 JSP에서 제공되는 태그들 이외에 사용자가 정의하여 사용할 수 있는 태그로 JSP를 확장시켜 주는 역할을 함.

사용자 정의 태그들 중 자주 사용하는 것들을 별도로 모아서 표준화한 태그 라이브러리를 JSTL(JSP Standard Tag Library)이라고 함.



## page 지시어

page 지시어는 JSP 페이지에 대한 정보를 입력하기 위해서 사용함. 출력 퍼버 관련 속성, 생성할 문서의 기본 정보, import할 클래스 설정 등을 할 수 있음.

```jsp
<%@ page contentType="text/html; charset=euc-kr" import="java.sql.*" %>
<%@ page session="false" %>
```

| 속성                       | 설명                                       | 기본 값      |
| ------------------------ | ---------------------------------------- | --------- |
| autoFlush                | 출력 버퍼가 다 찼을 경우 자동으로 버퍼를 비울지 여부를 나타냄.     | true      |
| contentType              | JSP 페이지 실행 결과로 생성할 문서의 종류(MIME 타입)와 사용될 charset 정보를 설정함. | text/html |
| import                   | JSP 페이지에서 사용할 자바 클래스를 지정함.               |           |
| language                 | JSP 페이지 스크립트 요소에서 사용할 수 있는 프로그래밍 언어를 설정함. 현재는 'java'만 가능함. | java      |
| session                  | JSP 페이지에서 session 객체 사용 여부를 지정함.         | true      |
| buffer                   | JSP 페이지 출력 버퍼 크기를 지정함. 'none'일 경우 출력 버퍼를 사용하지 않음. | 8kb       |
| info                     | JSP 페이지에 대한 설명을 텍스트로 입력할 때 사용함.          |           |
| errorPage                | JSP 페이지를 실행하는 동안 에러 페이지 설정할 때 사용함.       |           |
| isErrorPage              | 현재 페이지가 에러 페이지인지 여부를 지정함.                | false     |
| pageEncoding             | JSP 페이지의 문자 인코딩을 지정함.                    |           |
| isELIgnored              | 표현 언어를 지원할지의 여부를 설정하며 JSP 2.0 버전부터 새롭게 추가된  속성임. false일 경우 표현 언어를 지원, true일 경우 지원하지 않음. | false     |
| trimDirectiveWhithspaces | 생성되는 문서에서 공백문자 제거 여부를 지정함. true일 경우 공백이 제거됨. | false     |

### contentType 속성

MIME? Multipurpose Internet Mail Extensions. 텍스트, 이미지, 동영상, 사운드 등 여러 가지 형태의 데이터를 인터넷 환경에서 송수신할 때 적용되는 일종의 통신 규약.

contentType으로 지정할 수 있는 문서의 MIME 유형으로는 'text/html', 'text/xml', 'text/plain' 등이 있음.

charset은 contentType 속성 지정 시 함께 사용할 수 있으며 JSP 생성 문서에서 사용할 문자 인코딩 방법을 지정함. 기본 charset은 'ISO-8859-1'을 사용함.

### import 속성

JDK에서 제공하는 클래스를 사용할 때 import 속성을 사용해서 사용할 클래스를 명시해 주어야 함.

### trimDirectiveWhitespaces 속성

JSP 페이지의 실행 결과에는 JSP 페이지 앞부분에 사용된 page 지시어로 인해 불필요한 줄 바꿈 문자가 포함됨. JSP 2.1에 추가된 `trimDirectiveWhitespaces` 속성을 사용하면 이런 줄 바꿈 공백 문자를 제거할 수 있음.
